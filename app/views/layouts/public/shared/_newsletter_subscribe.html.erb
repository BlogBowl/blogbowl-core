<% if @page_settings.newsletter_cta_enabled %>
  <section class="w-full bg-base-200 flex flex-col items-center py-16 text-center gap-y-3 md:gap-y-5 px-5">
    <h2><%= @page_settings&.newsletter_cta_title.presence || "Newsletter CTA title" %></h2>
    <p class="opacity-80 md:w-1/3"><%= @page_settings&.newsletter_cta_description.presence || "Newsletter CTA description" %></p>
    <div class="mt-6 w-full max-w-[700px]">
      <%= form_with(url: dynamic_prefix(public_subscribe_path), model: Subscriber.new, class: 'flex items-center flex-col md:flex-row justify-center gap-y-4 md:gap-x-5',
                    data: { subscription_target: 'form', turbo_stream: true }, remote: true) do |f| %>
        <%= f.email_field :email,
                          placeholder: 'Enter your email...',
                          required: true,
                          class: 'input input-lg w-full md:flex-1',
                          data: { subscription_target: 'email' }
        %>
        <%= f.text_field :comment, class: "sr-only", tabindex: -1, autocomplete: "off" %>
        <%= button_tag type: 'submit', class: 'btn btn-lg btn-neutral w-full md:flex-1' do %>
          <%= (@page_settings&.newsletter_cta_button.presence || "Newsletter CTA button") %>
          <i class="iconoir-send-diagonal text-xl"></i>
        <% end %>
      <% end %>
      <div id="subscription_message"></div>
    </div>
    <% if @page_settings.newsletter_cta_disclaimer.present? %>
      <p class="text-sm opacity-60 mt-3"><%= @page_settings.newsletter_cta_disclaimer %></p>
    <% end %>
  </section>
<% end %>